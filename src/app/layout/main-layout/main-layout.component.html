<mat-sidenav-container class="h-screen">
  <!-- Sidebar -->
  <mat-sidenav
    #drawer
    [mode]="isMobile ? 'over' : 'side'"
    (openedChange)="onDrawerStateChange($event)"
    [opened]="!isMobile"
    class="w-64 shadow"
  >
    <div class="p-4">
      <img
        [src]="logoPath"
        alt="Logo Casa Vedra"
        class="h-64 mx-auto object-contain mb-4"
      />
      <h2
        class="text-xl font-bold text-center tracking-widest mb-6 hover:underline"
        routerLink="/"
      >
        ALEJANDRO VILLAR
      </h2>
      <nav class="flex flex-col gap-4">
        <a routerLink="/archive" class="hover:underline">Archivo</a>
        <!-- "Colecciones" toggle -->
        <button
          (click)="toggleCollections()"
          class="flex items-center justify-between w-full text-left hover:underline"
        >
          <span>Colecciones</span>
          <mat-icon
            class="transition-transform duration-300"
            [class.rotate-90]="collectionsOpen"
          >
            expand_more
          </mat-icon>
        </button>

        <!-- Submenu -->
        @if (collectionsVisible) {
        <div
          [@collapse]="collectionsOpen ? 'open' : 'closed'"
          class="ml-4 flex flex-col text-sm text-gray-700"
        >
          <a routerLink="/collections/suenhos" class="hover:underline"
            >Sueños</a
          >
          <a routerLink="/collections/musicos" class="hover:underline"
            >Músicos en la escuela</a
          >
          <a routerLink="/collections/etnicos" class="hover:underline"
            >Étnicos</a
          >
          <a routerLink="/collections/bocetos" class="hover:underline"
            >Bocetos</a
          >
        </div>
        }
        <a routerLink="/studio" class="hover:underline">Estudio</a>
        <a routerLink="/about" class="hover:underline">Sobre mí</a>
        <a routerLink="/contact" class="hover:underline">Contacto</a>

        <a
          [href]="instagramLink"
          target="_blank"
          rel="noopener"
          class="flex items-center justify-between w-full text-left hover:text-pink-600 transition group"
          aria-label="Instagram"
          title="Instagram"
        >
          <span class="group-hover:underline tracking-wide"> Instagram </span>
          <!-- Instagram Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-6 h-6 text-pink-500"
            fill="currentColor"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path
              d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 1.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7zm4.75-.75a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5z"
            />
          </svg>
        </a>
      </nav>
    </div>
  </mat-sidenav>

  <!-- Main content -->
  <mat-sidenav-content>
    @if (isMobile) {
    <mat-toolbar
      class="bg-white shadow-md px-4 py-2 flex justify-between items-center"
    >
      <!-- Left: Logo + Name -->
      <div class="flex items-center gap-3">
        <img
          [src]="logoPath"
          alt="Logo Casa Vedra"
          class="h-10 object-contain"
        />
        <span
          class="tracking-widest font-semibold hover:underline text-base sm:text-lg"
          routerLink="/"
        >
          ALEJANDRO VILLAR
        </span>
      </div>

      <!-- Right: Hamburger Button -->
      <button
        mat-icon-button
        (click)="drawer.toggle()"
        [class.rotate-90]="menuOpen"
        class="transition-transform duration-300 ease-in-out"
        aria-label="Toggle menu"
      >
        <mat-icon>menu</mat-icon>
      </button>
    </mat-toolbar>
    @if(!menuOpen){
    <a
      [href]="instagramLink"
      target="_blank"
      rel="noopener"
      class="fixed bottom-4 right-4 bg-white border border-gray-200 text-pink-500 hover:text-pink-600 hover:bg-pink-50 rounded-full shadow p-3 z-50 transition"
      aria-label="Instagram"
      title="Instagram"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="w-6 h-6 text-pink-500"
        fill="currentColor"
        viewBox="0 0 24 24"
        aria-hidden="true"
      >
        <path
          d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 1.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7zm4.75-.75a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5z"
        />
      </svg> </a
    >} }

    <main id="main-layout-contents" class="p-4">
      <router-outlet></router-outlet>
    </main>
  </mat-sidenav-content>
</mat-sidenav-container>
