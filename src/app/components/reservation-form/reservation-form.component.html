<form
  #reservationForm="ngForm"
  (ngSubmit)="onSubmit()"
  class="grid gap-6 max-w-xl mx-auto"
>
  <div
    class="flex items-center border border-gray-300 focus-within:border-black px-3 py-2"
  >
    <span class="material-icons-outlined text-gray-400 text-base mr-3"
      >person</span
    >
    <input
      required
      name="name"
      [(ngModel)]="formData.name"
      placeholder="Nombre"
      class="flex-1 placeholder-gray-500 focus:outline-none text-black bg-transparent"
      #name="ngModel"
    />
  </div>
  @if (name.invalid && name.touched) {
  <p class="text-sm text-red-600 mt-1">Nombre requerido</p>
  }

  <!-- Primer Apellido -->
  <div
    class="flex items-center border border-gray-300 focus-within:border-black px-3 py-2"
  >
    <span class="material-icons-outlined text-gray-400 text-base mr-3"
      >person</span
    >
    <input
      required
      name="surname1"
      [(ngModel)]="formData.surname1"
      placeholder="Primer apellido"
      class="flex-1 placeholder-gray-500 focus:outline-none text-black bg-transparent"
      #surname1="ngModel"
    />
  </div>
  @if (surname1.invalid && surname1.touched) {
  <p class="text-sm text-red-600 mt-1">Primer apellido requerido</p>
  }

  <!-- Segundo Apellido -->
  <div
    class="flex items-center border border-gray-300 focus-within:border-black px-3 py-2"
  >
    <span class="material-icons-outlined text-gray-400 text-base mr-3"
      >person</span
    >
    <input
      name="surname2"
      [(ngModel)]="formData.surname2"
      placeholder="Segundo apellido"
      class="flex-1 placeholder-gray-500 focus:outline-none text-black bg-transparent"
    />
  </div>

  <!-- Email -->
  <div
    class="flex items-center border border-gray-300 focus-within:border-black px-3 py-2"
  >
    <span class="material-icons-outlined text-gray-400 text-base mr-3"
      >mail</span
    >
    <input
      required
      type="email"
      name="email"
      [(ngModel)]="formData.email"
      placeholder="Email"
      class="flex-1 placeholder-gray-500 focus:outline-none text-black bg-transparent"
      #email="ngModel"
    />
  </div>
  @if (email.invalid && email.touched) {
  <p class="text-sm text-red-600 mt-1">Email válido requerido</p>
  }

  <!-- Comentarios -->
  <div
    class="flex items-start border border-gray-300 focus-within:border-black px-3 py-2"
  >
    <span class="material-icons-outlined text-gray-400 text-base mr-3 mt-1"
      >chat_bubble</span
    >
    <textarea
      name="comments"
      [(ngModel)]="formData.comments"
      placeholder="Comentarios"
      rows="4"
      class="flex-1 placeholder-gray-500 resize-none focus:outline-none text-black bg-transparent"
    ></textarea>
  </div>

  <!-- Submit -->
  <button
    type="submit"
    [disabled]="reservationForm.invalid || busy()"
    class="w-full text-center py-2 border border-black text-black hover:bg-black hover:text-white transition disabled:opacity-40 disabled:cursor-not-allowed flex justify-center items-center gap-2"
  >
    <span *ngIf="!busy()">
      @if (artwork()) { Enviar reserva } @else { Enviar consulta }
    </span>
    <span *ngIf="busy()" class="flex items-center gap-2">
      <span class="material-icons-outlined animate-spin text-base">sync</span>
      Enviando...
    </span>
  </button>
</form>
@if (submitted()) {
<div
  class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-green-600 text-white px-6 py-3 text-sm tracking-wide shadow-md"
>
  @if (artwork()) { ¡Reserva enviada correctamente! } @else { ¡Mensaje enviado
  correctamente! }
</div>
} @if (error()) {
<div
  class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-red-600 text-white px-6 py-3 text-sm tracking-wide shadow-md"
>
  @if (artwork()) { Error al enviar la reserva. Inténtalo de nuevo. } @else {
  Error al enviar el mensaje. Inténtelo de nuevo. }
</div>
}
